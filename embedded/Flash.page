---
title: Flash
categories: STM32F4
...
1.STM32F407VG 硬體介紹
 ============
- STM32F407VG版子外觀與模組如下圖所示：

.. image:: /STM32F4_2.jpg

- 上方USB Programmer/Debugger為ST-Link
- 石英晶體震盪器(Crystal)，可參考(http://zh.wikipedia.org/zh-tw/%E7%9F%B3%E8%8B%B1%E6%99%B6%E4%BD%93%E8%B0%90%E6%8C%AF%E5%99%A8)
- 中央的晶片為ARM® Cortex™-M4F core with embedded Flash and SRAM，其內部結構如Figure 5所示。
- 三軸加速度感知器(3-axis Accelerometer)
- 音頻數位類比轉換(Audio DAC)
- 麥克風晶片(Chip Microphone)
- USB On The Go (http://forum.slime.com.tw/thread180246.html)
- 音效輸出(Audio Jack)
- 此外，板子上有兩顆按鈕，藍色按鈕為User Button，黑色按鈕為Reset。

.. image:: /block_diag_1.JPG

.. image:: /block_diag_2.JPG

2.Software STM32F4 Lib
 ============

.. image:: /lib_1.JPG

3.debug gdb(介紹指令和操作方式)
 ============

- Debug設定大致如下圖所示(TCP/IP) : 

.. image:: /gdb_1.JPG

- Debug流程主要為 :

(1) 在Target(MCU)端開啟App與gdbserver。如果已經將程式燒入flash, 要透過MCU內建的gdb server來debug, 則必須使用st-util:

::

  st-util -p 3333

(2) 開啟Host端的gdb：

::

  arm-none-eabi-gdb your_elf_image.elf

(3) 連接到Target端的gdbserver，如

::

  target extended-remote : 3333 

(4) 當應用程式就緒後，可指定中斷點，接著按c，就會在指定的中斷點停下來。

- 可參考(http://www.codeproject.com/Articles/14983/Remote-Debugging-using-GDB)

4.flash 簡介(wiki)(user)(操作)
 ============
5.flash 記憶體架構介紹
 ============
6.flash register
 ============
7.example(範例流程)
 ============
8.ref
 ============